{
  "version": 3,
  "file": "ngx-emoji.js",
  "sources": [
    "ng://ngx-emoji/src/main/ngx-emoji.module.ts",
    "ng://ngx-emoji/src/main/ngx-emoji-picker.component.ts",
    "ng://ngx-emoji/src/main/ngx-emoji.component.ts",
    "ng://ngx-emoji/src/main/ngx-emoji.service.ts"
  ],
  "sourcesContent": [
    "import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxEmojiPickerComponent } from './ngx-emoji-picker.component';\nimport { NgxEmojiComponent } from './ngx-emoji.component';\nimport { NgxEmojiService } from './ngx-emoji.service';\nimport 'ngx-emoji/ngx-emoji.min.css';\nimport 'ngx-emoji/emojis.min.css';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        NgxEmojiPickerComponent, NgxEmojiComponent\n    ],\n    providers: [\n        NgxEmojiService\n    ],\n    exports: [\n        NgxEmojiPickerComponent, NgxEmojiComponent\n    ]\n})\nexport class NgxEmojiModule {\n}\n",
    "import { Component, OnInit, Input } from '@angular/core';\nimport { NgxEmojiService } from \"./ngx-emoji.service\";\nimport { NgxEmojiComponent } from \"./ngx-emoji.component\";\n\nexport interface NgxEmojiPickerEmoji {\n    unified: string;\n}\n\n@Component({\n    selector: 'ngx-emoji-picker',\n    template: `<i *ngFor=\"let emoji of emojis\"\n   [class]=\"'ngx-emoji ngx-emoji-' + emoji.unified\"\n   aria-hidden=\"true\"\n   (click)=\"emojiPicked(emoji.unified)\"\n></i>\n`\n})\nexport class NgxEmojiPickerComponent implements OnInit {\n\n    protected emojis: NgxEmojiPickerEmoji[] = [];\n\n    public constructor(\n        protected emojiService: NgxEmojiService\n    ) {\n    }\n\n    public ngOnInit(): void {\n        this.emojis = require('ngx-emoji/emojis.json');\n    }\n\n    public setEmojiService(service: NgxEmojiService): void {\n        this.emojiService = service;\n    }\n\n    @Input('for')\n    protected set inputFor(emojiComponent: NgxEmojiComponent) {\n        this.emojiService = new NgxEmojiService();\n        emojiComponent.addEmojiService(this.emojiService);\n    }\n\n    protected emojiPicked(emoji: string): void {\n        this.emojiService.onEmojiPicked.next(emoji);\n    }\n\n}\n",
    "import { Component, OnDestroy, ElementRef, Input, Output, EventEmitter, HostListener } from '@angular/core';\nimport { NgxEmojiService } from \"./ngx-emoji.service\";\nimport { Subscription } from \"rxjs/Subscription\";\nimport { NgxEmojiPickerComponent } from \"./ngx-emoji-picker.component\";\n\nexport interface EnterOn {\n    shift?: boolean;\n    ctrl?: boolean;\n}\n\nexport interface SelectionRange {\n    start: number;\n    stop: number;\n}\n\nexport enum NgxEmojiEntityType {\n    Bold,\n    Italic,\n    Underline\n}\n\nexport interface NgxEmojiEntity {\n    type: NgxEmojiEntityType | string;\n    offset: number;\n    length: number;\n}\n\n@Component({\n    selector: 'ngx-emoji',\n    template: ''\n})\nexport class NgxEmojiComponent implements OnDestroy {\n    private _contenteditable: boolean = false;\n    private _enterOn: EnterOn = {\n        shift: false,\n        ctrl: false\n    };\n    private prevent: {\n        text: string, entities: NgxEmojiEntity[]\n    } = {\n        text: null, entities: null\n    };\n\n    protected emojiService: NgxEmojiService;\n    protected emojiServiceSubscription: Subscription = new Subscription();\n    protected lastSelectionRange: Range;\n    protected readonly allowedTags = ['b', 'i', 'u', 'strong', 'em'];\n\n    public constructor(\n        protected elRef: ElementRef,\n        globalEmojiService: NgxEmojiService\n    ) {\n        let component = this;\n        globalEmojiService.setActiveComponent(this);\n        this.emojiService = globalEmojiService;\n        let subscription = this.emojiService.onEmojiPicked.subscribe(function (emoji: string) {\n            if (globalEmojiService.isActiveComponent(component)) {\n                component.insertEmoji(emoji);\n            }\n        });\n        this.emojiServiceSubscription.add(subscription);\n        this.getNativeElement().appendChild(document.createTextNode(''));\n        let range = document.createRange();\n        range.setStart(this.getNativeElement().firstChild, 0);\n        this.lastSelectionRange = range;\n\n        /**\n         * see: onFocusout()\n         */\n        if (document.onselectionchange !== undefined) {\n            document.addEventListener('selectionchange', function () {\n                component.onSelectionchange();\n            });\n        }\n    }\n\n    public getNativeElement(): HTMLElement {\n        return this.elRef.nativeElement;\n    }\n\n    public ngOnDestroy(): void {\n        this.emojiServiceSubscription.unsubscribe();\n    }\n\n    public addEmojiService(service: NgxEmojiService): void {\n        service.setActiveComponent(this);\n        let component = this;\n        let subscription = service.onEmojiPicked.subscribe(function (emoji: string) {\n            if (service.isActiveComponent(component)) {\n                component.insertEmoji(emoji);\n            }\n        });\n        this.emojiServiceSubscription.add(subscription);\n    }\n\n    /**\n     * Emoji picker\n     */\n\n    @Input('picker')\n    protected set inputPicker(pickerComponent: NgxEmojiPickerComponent) {\n        this.emojiServiceSubscription.unsubscribe();\n        this.emojiServiceSubscription = new Subscription();\n        let service = new NgxEmojiService();\n        service.setActiveComponent(this);\n        this.emojiService = service;\n        pickerComponent.setEmojiService(service);\n        let component = this;\n        let subscription = this.emojiService.onEmojiPicked.subscribe(function (emoji: string) {\n            if (service.isActiveComponent(component)) {\n                component.insertEmoji(emoji);\n            }\n        });\n        this.emojiServiceSubscription.add(subscription);\n    }\n\n    /**\n     * Content editable\n     */\n\n    @Input('attr.contenteditable')\n    protected set attrContenteditable(editable: boolean) {\n        this.contenteditable = editable;\n    }\n\n    @Input('contenteditable')\n    public set contenteditable(editable: boolean) {\n        this._contenteditable = editable;\n        this.elRef.nativeElement.setAttribute('contenteditable', editable);\n        this.onContenteditable.emit(editable);\n    }\n\n    public get contenteditable(): boolean {\n        return this._contenteditable;\n    }\n\n    @Output('contenteditable')\n    public readonly onContenteditable: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n    /**\n     * Enter on\n     */\n\n    @Input('enterOn')\n    public set enterOn(enterOn: EnterOn) {\n        this._enterOn = enterOn;\n        this.onEnterOn.emit(enterOn);\n    }\n\n    public get enterOn(): EnterOn {\n        return this._enterOn;\n    }\n\n    @Output('enterOn')\n    public readonly onEnterOn: EventEmitter<EnterOn> = new EventEmitter<EnterOn>();\n\n    public enterKeyIsEnter(): boolean {\n        return !this.enterKeyIsShiftEnter() && !this.enterKeyIsCtrlEnter();\n    }\n\n    public enterKeyIsCtrlEnter(): boolean {\n        return (this.enterOn.ctrl) ? true : false;\n    }\n\n    public enterKeyIsShiftEnter(): boolean {\n        return (this.enterOn.shift) ? true : false;\n    }\n\n    /**\n     * HTML\n     */\n\n    @Input('fullHtml')\n    public set fullHtml(html: string) {\n        this.getNativeElement().innerHTML = this.filterHtml(html, this.allowedTags)\n    }\n\n    public get fullHtml(): string {\n        let html = document.createElement('div');\n        html.innerHTML = this.getNativeElement().innerHTML;\n\n        for (let img of this.arrayOfNodeList(html.getElementsByTagName('img'))) {\n            if (!img.classList.contains('ngx-emoji')) {\n                continue;\n            }\n            let emoji = document.createElement('i');\n            emoji.className = img.className;\n            emoji.setAttribute('aria-hidden', 'true');\n            img.parentElement.insertBefore(emoji, img);\n            img.remove();\n        }\n\n        return html.innerHTML;\n    }\n\n    @Output('fullHtml')\n    public readonly onFullHtml: EventEmitter<string> = new EventEmitter<string>();\n\n    /**\n     * HTML wihout parahraphs\n     */\n\n    @Input('html')\n    public set html(html: string) {\n        this.getNativeElement().innerHTML = this.filterHtml(html, this.allowedTags)\n    }\n\n    public get html(): string {\n        return this.getHtml(this.getNativeElement());\n    }\n\n    protected getHtml(rootElement: HTMLElement): string {\n        let component = this;\n        let html = '';\n        let rf = function (nodes: NodeList): void {\n            for (let node of component.arrayOfNodeList(nodes)) {\n                let blockNode = component.isBlockNode(node);\n                if (component.isEmojiNode(node)) {\n                    html += component.emojiToSymbol(component.emojiFromNode(node));\n                } else if (node.hasChildNodes()) {\n                    if (!blockNode) {\n                        html += '<' + node.nodeName.toLowerCase() + '>';\n                    }\n                    rf(node.childNodes); // recursion...\n                    if (!blockNode) {\n                        html += '</' + node.nodeName.toLowerCase() + '>';\n                    }\n                } else {\n                    html += component.replaceAll(node.textContent, '\\n', '');\n                }\n                if (blockNode && !rootElement.lastChild.isSameNode(node)) {\n                    html += '\\n';\n                }\n                if (node.nodeName == 'BR'\n                    && node.parentNode.firstChild.nodeName != 'BR'\n                    && node.parentNode.childNodes.length != 1\n                    && rootElement.lastChild.lastChild\n                    && !rootElement.lastChild.lastChild.isSameNode(node)) {\n                    html += '\\n';\n                }\n                // hotfix: insert new line after non-block node\n                if (!blockNode\n                    && node.previousSibling\n                    && node.previousSibling.textContent.length > 0\n                    && node.nextSibling\n                    && component.isBlockNode(node.nextSibling)\n                    && node.parentNode.isSameNode(rootElement)) {\n                    html += '\\n';\n                }\n                // hotfix: insert new line after last emoji\n                if (component.isEmojiNode(node)\n                    && (node as HTMLElement).nextElementSibling\n                    && component.isBlockNode((node as HTMLElement).nextElementSibling)\n                    && node.nextSibling.textContent.length == 0) {\n                    html += '\\n';\n                }\n            }\n        };\n        rf(rootElement.childNodes);\n        html = this.replaceAll(html, '\\u00A0', ' ');\n        html = this.replaceAll(html, '&nbsp;', ' ');\n        return this.filterHtml(html, this.allowedTags);\n    }\n\n    @Output('html')\n    public readonly onHtml: EventEmitter<string> = new EventEmitter<string>();\n\n    /**\n     * Text\n     */\n\n    @Input('text')\n    public set text(text: string) {\n        if (!this.contenteditable && text == this.prevent.text) {\n            return;\n        }\n        this.prevent.text = text;\n\n        let component = this;\n        text = this.filterHtml(text);\n        text = this.replaceAll(text, '\\u00A0', ' ');\n        text = this.replaceAll(text, '  ', '&nbsp;&nbsp;');\n        text = this.replaceSymbolsToEmojis(text);\n\n        let paragraphs = text.split('\\n');\n        text = '';\n        for (let paragraph of paragraphs) {\n            if (paragraph.length == 0) {\n                paragraph = '<br>';\n            }\n            if (paragraph == ' ') {\n                paragraph = '&nbsp;';\n            }\n            text += '<div>' + paragraph + '</div>';\n        }\n        this.getNativeElement().innerHTML = text;\n        if (this.getNativeElement().childNodes.length == 0) {\n            this.getNativeElement().appendChild(document.createTextNode(''));\n        }\n        let range = document.createRange();\n        let lastChild = this.getNativeElement().lastChild;\n        while (lastChild.hasChildNodes()) {\n            lastChild = lastChild.lastChild;\n        }\n        range.setStart(lastChild, lastChild.textContent.length);\n        this.lastSelectionRange = range;\n    }\n\n    public get text(): string {\n        return this.filterHtml(this.html);\n    }\n\n    @Output('text')\n    public readonly onText: EventEmitter<string> = new EventEmitter<string>();\n\n    /**\n     * Entities\n     */\n\n    protected normalizeEntityType(type: any): NgxEmojiEntityType {\n        if (typeof type == 'string') {\n            type = type.toLowerCase();\n        }\n        switch (type) {\n            case 'bold':\n            case NgxEmojiEntityType.Bold:\n                return NgxEmojiEntityType.Bold;\n            case 'italic':\n            case NgxEmojiEntityType.Italic:\n                return NgxEmojiEntityType.Italic;\n            case 'underline':\n            case NgxEmojiEntityType.Underline:\n                return NgxEmojiEntityType.Underline;\n            default:\n                return null;\n        }\n    }\n\n    @Input('entities')\n    public set entities(entities: NgxEmojiEntity[]) {\n        if (!this.contenteditable && JSON.stringify(entities) == JSON.stringify(this.prevent.entities)) {\n            return;\n        }\n        this.prevent.entities = entities;\n\n        let component = this;\n        let nativeElement = this.getNativeElement();\n        let selection = window.getSelection();\n        let previousRange = (selection.rangeCount) ? selection.getRangeAt(0) : null;\n        let previousContenteditableState = this.contenteditable;\n        if (!Array.isArray(entities)) {\n            entities = [];\n        }\n        entities = entities.map(function (entity) {\n            return {\n                offset: entity.offset,\n                length: entity.length,\n                type: component.normalizeEntityType(entity.type)\n            };\n        }).filter(function (entity) {\n            return entity.type !== null;\n        });\n\n        // Clear html formatting\n        let text = this.text;\n        this.text = '';\n        this.text = text;\n\n        // Enable contenteditable for exec commands\n        this.contenteditable = true;\n\n        let endFounded = false;\n        for (let entity of entities) {\n            let range = document.createRange();\n            let offset = 0;\n            let rf = function (nodes: NodeList) {\n                for (let i = 0; i < nodes.length; i++) {\n                    let node = nodes.item(i);\n                    if (component.isEmojiNode(node)) {\n                        let textLength = component.emojiToSymbol(component.emojiFromNode(node)).length;\n                        if (offset <= entity.offset && offset + textLength >= entity.offset) {\n                            range.setStartBefore(node);\n                        }\n                        if (offset <= entity.offset + entity.length && offset + textLength >= entity.offset + entity.length) {\n                            range.setEndAfter(node);\n                            endFounded = true;\n                        }\n                        offset += textLength;\n                    } else {\n                        if (node.hasChildNodes()) {\n                            rf(node.childNodes); // recursion\n                        } else if (node.nodeName != 'BR') {\n                            let textLength = node.textContent.length;\n                            if (offset <= entity.offset && offset + textLength >= entity.offset) {\n                                range.setStart(node, entity.offset - offset);\n                            }\n                            if (offset <= entity.offset + entity.length && offset + textLength >= entity.offset + entity.length) {\n                                range.setEnd(node, entity.offset + entity.length - offset);\n                                endFounded = true;\n                            }\n                            offset += textLength;\n                        }\n                        if (component.isBlockNode(node)) {\n                            offset++;\n                            if (entity.offset + entity.length == offset) {\n                                range.setEndAfter(node.lastChild);\n                                endFounded = true;\n                            }\n                        }\n                    }\n                }\n            };\n            rf(nativeElement.childNodes);\n            if (!endFounded) {\n                range.setEndAfter(nativeElement.lastChild);\n            }\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.formatText(entity.type as NgxEmojiEntityType);\n        }\n\n        // Restore previous state\n        selection.removeAllRanges();\n        if (previousRange) {\n            selection.addRange(previousRange);\n        }\n        this.contenteditable = previousContenteditableState;\n    }\n\n    public get entities(): NgxEmojiEntity[] {\n        let component = this;\n        let entities: NgxEmojiEntity[] = [];\n        let rf = function (nodes: NodeList, offset: number): void {\n            for (let node of component.arrayOfNodeList(nodes)) {\n                if (node.textContent.trim().length > 0) {\n                    let nodeName = node.nodeName.toUpperCase();\n                    if (nodeName == 'B' || nodeName == 'STRONG') {\n                        entities.push({\n                            type: NgxEmojiEntityType[NgxEmojiEntityType.Bold].toLowerCase(),\n                            offset: offset,\n                            length: node.textContent.length\n                        });\n                    }\n                    if (nodeName == 'I' || nodeName == 'EM') {\n                        entities.push({\n                            type: NgxEmojiEntityType[NgxEmojiEntityType.Italic].toLowerCase(),\n                            offset: offset,\n                            length: node.textContent.length\n                        });\n                    }\n                    if (nodeName == 'U') {\n                        entities.push({\n                            type: NgxEmojiEntityType[NgxEmojiEntityType.Underline].toLowerCase(),\n                            offset: offset,\n                            length: node.textContent.length\n                        });\n                    }\n                }\n                rf(node.childNodes, offset);\n                offset += node.textContent.length;\n            }\n        };\n        let div = document.createElement('div');\n        div.innerHTML = this.html;\n        rf(div.childNodes, 0);\n        div.remove();\n        return entities;\n    }\n\n    @Output('entities')\n    public readonly onEntities: EventEmitter<NgxEmojiEntity[]> = new EventEmitter<NgxEmojiEntity[]>();\n\n    /**\n     * Enter events\n     */\n\n    @Output('enter')\n    public readonly onEnter: EventEmitter<void> = new EventEmitter<void>();\n\n    @HostListener(\"keydown.enter\", ['$event'])\n    protected onKeydownEnter(event: KeyboardEvent): void {\n        if (!this.contenteditable) {\n            return;\n        }\n        event.preventDefault();\n        if (this.enterKeyIsEnter()) {\n            this.emitEnter();\n        } else {\n            this.insertNewLine();\n        }\n    }\n\n    @HostListener(\"keydown.control.enter\", ['$event'])\n    protected onKeydownControlEnter(event: KeyboardEvent): void {\n        if (!this.contenteditable) {\n            return;\n        }\n        event.preventDefault();\n        if (this.enterKeyIsCtrlEnter()) {\n            this.emitEnter();\n        } else {\n            this.insertNewLine();\n        }\n    }\n\n    @HostListener(\"keydown.shift.enter\", ['$event'])\n    protected onKeydownShiftEnter(event: KeyboardEvent): void {\n        if (!this.contenteditable) {\n            return;\n        }\n        event.preventDefault();\n        if (this.enterKeyIsShiftEnter()) {\n            this.emitEnter();\n        }\n    }\n\n    protected emitEnter(): void {\n        this.onText.emit(this.text);\n        this.onEntities.emit(this.entities);\n        this.onFullHtml.emit(this.fullHtml);\n        this.onHtml.emit(this.html);\n        this.onEnter.emit();\n    }\n\n    /**\n     * Keyboard events\n     */\n\n    @HostListener(\"keydown\", ['$event'])\n    protected onKeydown(event: KeyboardEvent): void {\n        if (event.ctrlKey && event.keyCode == 66) {\n            event.preventDefault();\n            this.formatText(NgxEmojiEntityType.Bold);\n        }\n        if (event.ctrlKey && event.keyCode == 73) {\n            event.preventDefault();\n            this.formatText(NgxEmojiEntityType.Italic);\n        }\n        if (event.ctrlKey && event.keyCode == 85) {\n            event.preventDefault();\n            this.formatText(NgxEmojiEntityType.Underline);\n        }\n    }\n\n    /**\n     * Focus events\n     */\n\n    @HostListener(\"focus\")\n    protected onFocus(): void {\n        this.emojiService.setActiveComponent(this);\n    }\n\n    /**\n     * Get selection before blur don't work in Firefox.\n     * Use hotfix with onSelectionchange()\n     * This is fallback\n     */\n    @HostListener(\"focusout\")\n    protected onFocusout(): void {\n        if (document.onselectionchange === undefined) {\n            this.lastSelectionRange = window.getSelection().getRangeAt(0);\n        }\n    }\n\n    protected onSelectionchange() {\n        let selection = window.getSelection();\n        if (selection.containsNode(this.getNativeElement(), true)) {\n            this.lastSelectionRange = selection.getRangeAt(0);\n        }\n    }\n\n    /**\n     * Clipboard events\n     */\n\n    @HostListener(\"paste\", ['$event'])\n    protected onPaste(event: ClipboardEvent): void {\n        event.preventDefault();\n        let html = '';\n        if (event.clipboardData.types.indexOf('text/html') > -1) {\n            html = event.clipboardData.getData('text/html');\n        } else if (event.clipboardData.types.indexOf('text/plain') > -1) {\n            html = event.clipboardData.getData('text/plain');\n        }\n        html = this.filterHtml(html, this.allowedTags);\n        html = this.replaceSymbolsToEmojis(html);\n        this.execCommand('insertHTML', html);\n    }\n\n    @HostListener(\"copy\", ['$event'])\n    protected onCopy(event: ClipboardEvent): void {\n        let previousRange = window.getSelection().getRangeAt(0);\n        if (previousRange.collapsed) {\n            return;\n        }\n        event.preventDefault();\n        let content: DocumentFragment = window.getSelection().getRangeAt(0).cloneContents();\n        let div = document.createElement('div');\n        div.appendChild(content);\n        div.innerHTML = this.getHtml(div);\n        // Copy HTML hack\n        document.getElementsByTagName('body')[0].appendChild(div);\n        let range = document.createRange();\n        range.setStartBefore(div.firstChild);\n        range.setEndAfter(div.lastChild);\n        let selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n        this.execCommand('copy');\n        div.remove();\n        selection.removeAllRanges();\n        selection.addRange(previousRange);\n    }\n\n    @HostListener(\"cut\", ['$event'])\n    protected onCut(event: ClipboardEvent): void {\n        this.onCopy(event);\n        this.execCommand('delete');\n    }\n\n    /**\n     * Click events\n     */\n\n    @HostListener(\"click\", ['$event'])\n    protected onClick(event: MouseEvent): void {\n        if (!this.contenteditable) {\n            return;\n        }\n        if (this.isEmojiNode(event.toElement)) {\n            let range = document.createRange();\n            range.setStartBefore(event.toElement);\n            let selection = window.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n    }\n\n    /**\n     * Internal\n     */\n\n    protected arrayOfNodeList<T extends Node>(list: NodeListOf<T>): T[] {\n        let result: T[] = [];\n        for (let i = 0; i < list.length; i++) {\n            result.push(list.item(i))\n        }\n        return result;\n    }\n\n    protected isBlockNode(node: Node): boolean {\n        if (!(node instanceof HTMLElement)) {\n            return false;\n        }\n        if (node instanceof HTMLDivElement) {\n            return true;\n        }\n        return window.getComputedStyle(node, '').display == 'block';\n    }\n\n    protected isEmojiNode(node: Node): boolean {\n        if (!(node instanceof HTMLElement)) {\n            return false;\n        }\n        return node.classList.contains('ngx-emoji');\n    }\n\n    protected emojiFromNode(node: Node): string {\n        if (!this.isEmojiNode(node)) {\n            return null;\n        }\n        let classList = (node as HTMLElement).classList;\n        let emoji = null;\n        for (let i = 0; i < classList.length; i++) {\n            if (classList.item(i).substr(0, 10) == 'ngx-emoji-') {\n                emoji = classList.item(i).substr(10);\n                break;\n            }\n        }\n        return emoji;\n    }\n\n    protected replaceSymbolsToEmojis(text: string): string {\n        let component = this;\n        text = text.replace(this.getEmojiRegex(), function (match) {\n            return component.createEmojiImg(component.emojiFromSymbol(match));\n        });\n        text = this.replaceAll(text, '\\uFE0F', ''); // remove variation selector\n        return text;\n    }\n\n    /**\n     * String replace all implementation\n     *\n     * See: https://stackoverflow.com/a/1144788/1617101\n     */\n    protected replaceAll(str: string, find: string, replace: string): string {\n        find = find.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n        return str.replace(new RegExp(find, 'g'), replace);\n    }\n\n    protected execCommand(command: string, value?: any): boolean {\n        return document.execCommand(command, false, value);\n    }\n\n    protected insertNewLine(): void {\n        this.execCommand('insertParagraph');\n    }\n\n    protected createEmojiImg(emoji: string): string {\n        return '<img class=\"ngx-emoji ngx-emoji-' + emoji + '\" ' +\n            'aria-hidden=\"true\" ' +\n            'alt=\"' + this.emojiToSymbol(emoji) + '\" ' +\n            'src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\">';\n    }\n\n    protected emojiToSymbol(emoji: string): string {\n        emoji = emoji.trim();\n        if (emoji.length == 0) {\n            return '�';\n        }\n        let emojiCodes = emoji.split('-').map(function (value) {\n            return parseInt('0x' + value, 16);\n        });\n        try {\n            emoji = String.fromCodePoint.apply(String, emojiCodes);\n        } catch (error) {\n            console.warn('Convert emoji ' + emoji + ' error: ' + error.message);\n            emoji = '�';\n        }\n        return emoji;\n    }\n\n    protected emojiFromSymbol(symbol: string): string {\n        let codes: string[] = [];\n        for (let i = 0; i < symbol.length; i++) {\n            codes.push(symbol.codePointAt(i).toString(16));\n        }\n        codes = codes\n            .filter(function (code: string) {\n                let p = parseInt(code, 16);\n                return !(p >= 0xD800 && p <= 0xDFFF);\n            })\n            .map(function (code: string) {\n                let pad = '0000';\n                return pad.substring(0, pad.length - code.length) + code;\n            });\n        return codes.join('-').toUpperCase();\n    }\n\n    protected insertEmoji(emoji: string): void {\n        if (!this.contenteditable) {\n            return;\n        }\n        let selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(this.lastSelectionRange);\n        this.execCommand(\n            'insertHTML',\n            this.createEmojiImg(emoji)\n        );\n    }\n\n    protected filterHtml(html: string, allowTags: string[] = []): string {\n        let component = this;\n        allowTags = allowTags.map(function (value) {\n            return value.toUpperCase();\n        });\n        let tmp = document.createElement(\"div\");\n        tmp.innerHTML = html;\n        html = '';\n        let rf = function (nodes: NodeList): void {\n            for (let node of component.arrayOfNodeList(nodes)) {\n                if (node.nodeType == node.ELEMENT_NODE) {\n                    if (allowTags.indexOf(node.nodeName) > -1) {\n                        html += '<' + node.nodeName.toLowerCase() + '>';\n                        rf(node.childNodes);\n                        html += '</' + node.nodeName.toLowerCase() + '>';\n                    } else {\n                        rf(node.childNodes);\n                    }\n                } else {\n                    html += node.textContent;\n                }\n            }\n        };\n        rf(tmp.childNodes);\n        tmp.remove();\n        return html;\n    }\n\n    protected formatText(type: NgxEmojiEntityType): void {\n        switch (type) {\n            case NgxEmojiEntityType.Bold:\n                this.execCommand('bold');\n                break;\n            case NgxEmojiEntityType.Italic:\n                this.execCommand('italic');\n                break;\n            case NgxEmojiEntityType.Underline:\n                this.execCommand('underline');\n                break;\n        }\n    }\n\n    /**\n     * See: https://stackoverflow.com/a/41164587/1617101\n     */\n    protected getEmojiRegex(): RegExp {\n        return /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g;\n    }\n\n}\n",
    "import { Injectable } from '@angular/core';\nimport { Subject } from \"rxjs/Subject\";\nimport { NgxEmojiComponent } from \"./ngx-emoji.component\";\n\n@Injectable()\nexport class NgxEmojiService {\n    public readonly onEmojiPicked: Subject<string> = new Subject<string>();\n    protected activeComponent: NgxEmojiComponent;\n\n    public setActiveComponent(component: NgxEmojiComponent): void {\n        this.activeComponent = component;\n    }\n\n    public isActiveComponent(component: NgxEmojiComponent): boolean {\n        return component === this.activeComponent;\n    }\n\n}\n"
  ],
  "names": [
    "Subscription",
    "Subject"
  ],
  "mappings": "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"
}
